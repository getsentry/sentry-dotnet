name: List vulnerable packages

on:
  schedule:
    # once a day
    - cron:  '0 0 * * *'
jobs:
  List-vulnerable-packages:
    runs-on: windows-latest
    env:
      DOTNET_CLI_TELEMETRY_OPTOUT: 1
      DOTNET_NOLOGO: 1
      DOTNET_MULTILEVEL_LOOKUP: 1
    steps:
        - name: Checkout
          uses: actions/checkout@v2.3.3
          with:
            submodules: recursive

        - name: Restore
          run: dotnet restore

        - name: List vulnerable packages
          if: matrix.os == 'windows-latest'
          run: dotnet list package --vulnerable --include-transitive
