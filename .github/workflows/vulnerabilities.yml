name: List vulnerable packages

on:
  schedule:
    # once a day
    - cron:  '0 0 * * *'
    # At every 10th minute for testing
    - 0/10 * * * *
jobs:
  List-vulnerable-packages:
    runs-on: windows-latest
    env:
      DOTNET_CLI_TELEMETRY_OPTOUT: 1
      DOTNET_NOLOGO: 1
      DOTNET_MULTILEVEL_LOOKUP: 1
    steps:
        - name: Checkout
          uses: actions/checkout@v2.3.3
          with:
            submodules: recursive

        - name: Build
          run: dotnet build

        - name: List vulnerable packages
          run: dotnet list package --vulnerable --include-transitive
